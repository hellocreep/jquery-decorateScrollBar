/**
 * jquery.decorateScrollBar - v1.0.1 
 * https://github.com/nange/jquery-decorateScrollBar 
 * @author LanceLi 
 * Copyright (c) 2013 AAXIS LanceLi; Licensed MIT
 */
(function(t){function e(t,e,i){var o="mousewheel",l=function(t){return t.delta=t.wheelDelta?t.wheelDelta/120:-(t.detail||0)/3,"srcElement"in t&&!("target"in t)&&(t.target=t.srcElement),!t.preventDefault&&"returnValue"in t&&(t.preventDefault=function(){t.returnValue=!1}),t};window.addEventListener?("mozHidden"in document&&(o="DOMMouseScroll"),t.addEventListener(o,function(t){e.call(this,l(t))},i||!1)):window.attachEvent&&t.attachEvent("on"+o,function(i){i=i||window.event,e.call(t,l(i))})}var i=function(e,i){this.$element=t(e),this.options=i,this.init()};i.DEFAULTS={contentId:"",contentClassName:"",sbYRailClassName:"scrollbar-y-rail",sbYClassName:"scrollbar-y",sbYUpClickClassName:"scrollbar-y-up-click",sbYDownClickClassName:"scrollbar-y-down-click",sbXRailClassName:"scrollbar-x-rail",sbXClassName:"scrollbar-x",sbXLeftClickClassName:"scrollbar-x-left-click",sbXRightClickClassName:"scrollbar-x-right-click",sbYRailWidth:12,sbXRailHeight:12,clickMoveSpace:30,mouseWheelSpeed:50,railClickMoveCoefficient:2,showClickButton:!1},i.prototype={constructor:i,scrollbarYDOM:"<div><div><a></a></div><div></div><div><a></a></div></div>",init:function(){this.hasScrollBar()&&(this.initCssProperties(),this.needScrollBarOnY()&&(this.initScrollbarY(),this.bindMousedownOnScrollbarY(),this.bindClickOnScrollbarYUp(),this.bindClickOnScrollbarYDown(),this.bindClickOnScrollbarYRail(),this.bindMouseWheel()),this.needScrollBarOnX()&&(this.initScrollbarX(),this.bindMousedownOnScrollbarX(),this.bindClickOnScrollbarXLeft(),this.bindClickOnScrollbarXRight(),this.bindClickOnScrollbarXRail()),this.bindResizeOnWindow())},initCssProperties:function(){var t=this.$element,e=this.getContentEl();"static"===t.css("position")&&(this.options.originalPosition="static",t.css("position","relative")),"hidden"!==e.css("overflow")&&(this.options.originalOverflow=e.css("overflow"),e.css("overflow","hidden"))},initScrollbarY:function(){var e,i=t(this.scrollbarYDOM);e=i.addClass(this.options.sbYRailClassName),e.children(":nth-child(1)").addClass(this.options.sbYUpClickClassName),e.children(":nth-child(2)").addClass(this.options.sbYClassName),e.children(":nth-child(3)").addClass(this.options.sbYDownClickClassName),e.appendTo(this.$element),e.css({height:this.getWapperHeight(),width:this.options.sbYRailWidth}),this.options.showClickButton?this.$element.find("."+this.options.sbYDownClickClassName).css("bottom",0):(this.$element.find("."+this.options.sbYUpClickClassName).css({width:0,height:0,margin:0,border:"none",display:"none"}),this.$element.find("."+this.options.sbYDownClickClassName).css({width:0,height:0,margin:0,border:"none",display:"none"})),this.$element.css("padding-right",e.outerWidth()),this.$element.find("."+this.options.sbYClassName).css({height:this.getScrollYHeight(),top:this.getSbUpClickHeight()})},initScrollbarX:function(){var e,i=t(this.scrollbarYDOM);e=i.addClass(this.options.sbXRailClassName),e.children(":nth-child(1)").addClass(this.options.sbXLeftClickClassName),e.children(":nth-child(2)").addClass(this.options.sbXClassName),e.children(":nth-child(3)").addClass(this.options.sbXRightClickClassName),i.appendTo(this.$element),i.css({height:this.options.sbXRailHeight,width:this.getWapperWidth()}),this.options.showClickButton||(this.$element.find("."+this.options.sbXLeftClickClassName).css({width:0,height:0,margin:0,border:"none",display:"none"}),this.$element.find("."+this.options.sbXRightClickClassName).css({width:0,height:0,margin:0,border:"none",display:"none"})),this.$element.css("padding-bottom",e.outerHeight()),this.$element.find("."+this.options.sbXClassName).css({width:this.getScrollXWidth(),left:this.getSbLeftClickWidth()})},bindMousedownOnScrollbarY:function(){var e=this.$element,i=this;e.find("."+this.options.sbYClassName).on("mousedown.descrollbar",function(e){var o=t(this),l=i.getContentEl().scrollTop(),s=o.position().top,n=e.clientY;t(document).on("mousemove.descrollbar",function(t){var e=i.getMaxScrollTop(),c=t.clientY,r=c-n,a=r/i.getScrollYRailHeight()*i.getContentHeight();afterScrollTop=a+l,afterScrollBarTop=r+s,afterScrollTop>=0&&e>=afterScrollTop&&(i.getContentEl().scrollTop(afterScrollTop),o.css("top",afterScrollBarTop))}),t(document).on("mouseup.descrollbar",function(){t(document).off("mousemove.descrollbar"),t(document).off("mouseup.descrollbar")}),e.preventDefault(),e.stopPropagation()})},bindMousedownOnScrollbarX:function(){var e=this.$element,i=this;e.find("."+this.options.sbXClassName).on("mousedown.descrollbar",function(e){var o=t(this),l=i.getContentEl().scrollLeft(),s=o.position().left,n=e.clientX;t(document).on("mousemove.descrollbar",function(t){var e=i.getMaxScrollLeft(),c=t.clientX,r=c-n,a=r/i.getScrollXRailWidth()*i.getContentWidth();afterScrollLeft=a+l,afterScrollBarLeft=r+s,afterScrollLeft>=0&&e>=afterScrollLeft&&(i.getContentEl().scrollLeft(afterScrollLeft),o.css("left",afterScrollBarLeft))}),t(document).on("mouseup.descrollbar",function(){t(document).off("mousemove.descrollbar"),t(document).off("mouseup.descrollbar")}),e.preventDefault(),e.stopPropagation()})},bindClickOnScrollbarYUp:function(){var e=this.$element,i=this;e.on("click.descrollbar","."+this.options.sbYUpClickClassName,function(e){e.preventDefault();var o,l,s,n=t(this),c=i.getContentEl().scrollTop(),r=n.next().position().top;o=i.options.clickMoveSpace/i.getScrollYRailHeight()*i.getContentHeight(),l=c-o,s=r-i.options.clickMoveSpace,l>=0?(i.getContentEl().scrollTop(l),n.next().css("top",s)):(i.getContentEl().scrollTop(0),n.next().css("top",i.getSbUpClickHeight()))})},bindClickOnScrollbarXLeft:function(){var e=this.$element,i=this;e.on("click.descrollbar","."+this.options.sbXLeftClickClassName,function(e){e.preventDefault();var o,l,s,n=t(this),c=i.getContentEl().scrollLeft(),r=n.next().position().left;o=i.options.clickMoveSpace/i.getScrollXRailWidth()*i.getContentWidth(),l=c-o,s=r-i.options.clickMoveSpace,l>=0?(i.getContentEl().scrollLeft(l),n.next().css("left",s)):(i.getContentEl().scrollLeft(0),n.next().css("left",i.getSbLeftClickWidth()))})},bindClickOnScrollbarYDown:function(){var e=this.$element,i=this;e.on("click.descrollbar","."+this.options.sbYDownClickClassName,function(){var e,o,l,s=t(this),n=i.getMaxScrollTop(),c=i.getContentEl().scrollTop(),r=s.prev().position().top;e=i.options.clickMoveSpace/i.getScrollYRailHeight()*i.getContentHeight(),o=c+e,l=r+i.options.clickMoveSpace,n>=o?(i.getContentEl().scrollTop(o),s.prev().css("top",l)):(i.getContentEl().scrollTop(n),s.prev().css("top",i.getScrollYRailHeight()-i.getScrollYHeight()+i.getSbUpClickHeight()))})},bindClickOnScrollbarXRight:function(){var e=this.$element,i=this;e.on("click.descrollbar","."+this.options.sbXRightClickClassName,function(){var e,o,l,s=t(this),n=i.getMaxScrollLeft(),c=i.getContentEl().scrollLeft(),r=s.prev().position().left;e=i.options.clickMoveSpace/i.getScrollXRailWidth()*i.getContentWidth(),o=c+e,l=r+i.options.clickMoveSpace,n>=o?(i.getContentEl().scrollLeft(o),s.prev().css("left",l)):(i.getContentEl().scrollLeft(n),s.prev().css("left",i.getScrollXRailWidth()-i.getScrollXWidth()+i.getSbLeftClickWidth()))})},bindClickOnScrollbarYRail:function(){var t=this.$element,e=this;t.on("click.descrollbar",function(i){var o,l,s,n,c,r=i.pageY,a=t.find("."+e.options.sbYClassName),h=e.getMaxScrollTop(),p=e.getContentEl().scrollTop(),d=a.position().top;i.target.className===e.options.sbYRailClassName&&(n=a.offset().top,c=n+e.getScrollYHeight(),o=e.options.clickMoveSpace*e.options.railClickMoveCoefficient/e.getScrollYRailHeight()*e.getContentHeight(),n>r?(l=p-o,s=d-e.options.clickMoveSpace*e.options.railClickMoveCoefficient,l>=0?(e.getContentEl().scrollTop(l),a.css("top",s)):(e.getContentEl().scrollTop(0),a.css("top",e.getSbUpClickHeight()))):r>c&&(l=p+o,s=d+e.options.clickMoveSpace*e.options.railClickMoveCoefficient,h>=l?(e.getContentEl().scrollTop(l),a.css("top",s)):(e.getContentEl().scrollTop(h),a.css("top",e.getScrollYRailHeight()-e.getScrollYHeight()+e.getSbUpClickHeight()))))})},bindClickOnScrollbarXRail:function(){var t=this.$element,e=this;t.on("click.descrollbar",function(i){var o,l,s,n,c,r=i.pageX,a=t.find("."+e.options.sbXClassName),h=e.getMaxScrollLeft(),p=e.getContentEl().scrollLeft(),d=a.position().left;i.target.className===e.options.sbXRailClassName&&(n=a.offset().left,c=n+e.getScrollXWidth(),o=e.options.clickMoveSpace*e.options.railClickMoveCoefficient/e.getScrollXRailWidth()*e.getContentWidth(),n>r?(l=p-o,s=d-e.options.clickMoveSpace*e.options.railClickMoveCoefficient,l>=0?(e.getContentEl().scrollLeft(l),a.css("left",s)):(e.getContentEl().scrollLeft(0),a.css("left",e.getSbLeftClickWidth()))):r>c&&(l=p+o,s=d+e.options.clickMoveSpace*e.options.railClickMoveCoefficient,h>=l?(e.getContentEl().scrollLeft(l),a.css("left",s)):(e.getContentEl().scrollLeft(h),a.css("left",e.getScrollXRailWidth()-e.getScrollXWidth()+e.getSbLeftClickWidth()))))})},bindMouseWheel:function(){var i=this,o=function(e){var o,l,s,n=t(this),c=e.delta,r=n.find("."+i.options.sbYClassName),a=i.getContentEl().scrollTop(),h=r.position().top,p=i.getMaxScrollTop();o=i.options.mouseWheelSpeed/i.getScrollYRailHeight()*i.getContentHeight(),c>0?(l=a-o,s=h-i.options.mouseWheelSpeed,l>=0?(i.getContentEl().scrollTop(l),r.css("top",s)):(i.getContentEl().scrollTop(0),r.css("top",i.getSbUpClickHeight()))):0>c&&(l=a+o,s=h+i.options.mouseWheelSpeed,p>=l?(i.getContentEl().scrollTop(l),r.css("top",s)):(i.getContentEl().scrollTop(p),r.css("top",i.getScrollYRailHeight()-i.getScrollYHeight()+i.getSbUpClickHeight()))),e.preventDefault()};e(this.$element[0],o)},bindResizeOnWindow:function(){var e=this;t(window).on("resize",function(){e.update()})},getScrollYHeight:function(){return this.getWapperHeight()/this.getContentHeight()*this.getScrollYRailHeight()},getScrollYWidth:function(){return this.$element.find("."+this.options.sbYRailClassName).outerWidth()},getScrollXWidth:function(){return this.getWapperWidth()/this.getContentWidth()*this.getScrollXRailWidth()},getWapperHeight:function(){return this.$element.height()},getWapperWidth:function(){return this.$element.width()},getContentHeight:function(){return this.getContentEl().prop("scrollHeight")},getContentWidth:function(){return this.getContentEl().prop("scrollWidth")},getScrollXRailWidth:function(){return this.options.showClickButton?this.$element.find("."+this.options.sbXRightClickClassName).position().left-this.$element.find("."+this.options.sbXLeftClickClassName).outerWidth():this.getWapperWidth()},getScrollYRailHeight:function(){return this.options.showClickButton?this.$element.find("."+this.options.sbYDownClickClassName).position().top-this.$element.find("."+this.options.sbYUpClickClassName).outerHeight():this.getWapperHeight()},getSbUpClickHeight:function(){return this.$element.find("."+this.options.sbYUpClickClassName).outerHeight()},getSbLeftClickWidth:function(){return this.$element.find("."+this.options.sbXLeftClickClassName).outerWidth()},getSbDownClickHeight:function(){return this.$element.find("."+this.options.sbYDownClickClassName).outerHeight()},getMaxScrollTop:function(){return this.getContentHeight()-this.getWapperHeight()},getMaxScrollLeft:function(){return this.getContentWidth()-this.getWapperWidth()},getContentSelector:function(){var t;return this.options.contentId?t="#"+this.options.contentId:this.options.contentClassName&&(t="."+this.options.contentClassName),t},getContentEl:function(){return this.getContentSelector()?this.$element.find(contentSelector):this.$element.children().first()},needScrollBarOnY:function(){return this.getContentHeight()>this.getWapperHeight()?!0:!1},needScrollBarOnX:function(){return this.getContentWidth()>this.getWapperWidth()?!0:!1},hasScrollBar:function(){return this.needScrollBarOnY()||this.needScrollBarOnX()},update:function(){this.needScrollBarOnY()&&(this.$element.find("."+this.options.sbYRailClassName).css({height:this.getWapperHeight()}),this.$element.find("."+this.options.sbYClassName).css({height:this.getScrollYHeight()})),this.needScrollBarOnX()&&(this.$element.find("."+this.options.sbXRailClassName).css({width:this.getWapperWidth()}),this.$element.find("."+this.options.sbXClassName).css({width:this.getScrollXWidth()}))},destroy:function(){this.$element.find("."+this.options.sbYRailClassName).remove(),this.$element.find("."+this.options.sbXRailClassName).remove(),this.$element.off("click.descrollbar"),this.options.originalOverflow&&this.getContentEl().css("overflow",this.options.originalOverflow),this.options.originalPosition&&this.$element.css("position",this.options.originalPosition),this.$element.css("padding",0),this.$element.removeData("descrollbar")}},t.fn.decorateScrollBar=function(e){var o=t.extend({},i.DEFAULTS,"object"==typeof e&&e);return this.each(function(){var l=t(this),s=l.data("descrollbar"),n={update:"update",destroy:"destroy"};s||l.data("descrollbar",new i(this,o)),"string"==typeof e&&e in n&&s[n[e]]()})}})(jQuery);